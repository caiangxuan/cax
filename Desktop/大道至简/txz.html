<html>
<head>
    <script type="text/javascript"> //创建一个二维数组
    function Es() {
        var E = [
            [
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 3, 0, 0, 0, 3, 0, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 3, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 4, 1, 1, 1]
            ], [
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 3, 3, 0, 0, 3, 0, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 1, 3, 0, 1, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 4, 1, 1, 1]
            ], [
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 3, 3, 0, 0, 3, 0, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 1, 1, 3, 0, 1, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 4, 1, 1, 1]
            ], [
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 3, 1, 0, 0, 3, 0, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 1, 3, 0, 1, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 4, 1, 1, 1]
            ], [
                [1, 0, 1, 1, 1, 1, 1, 1, 1, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 0, 0, 0, 0, 0, 1, 0, 1],
                [1, 0, 1, 3, 0, 0, 3, 0, 1, 1],
                [1, 0, 1, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 1, 3, 0, 1, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 0, 1, 0, 1, 0, 0, 0, 0, 1],
                [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
                [1, 1, 1, 1, 1, 1, 4, 1, 1, 1]
            ]
        ];
        return E;
    }

    var g = 0;
    var fx = 3;
    var r;  //定义人
    var x = 1, y = 0; //定义坐标

    //		function sleep(n){
    //					var start = new Date().getTime();
    //					while (true) {
    //						if (new Date().getTime() - start > n) {
    //							break;
    //						}
    //					}
    //
    //				}
    //		function lu(){
    //			lu.style.background="url(6.png)"
    //		}
    var init = function () {
        E = Es();
        dt();


    }
    //		function sleep (time) {
    //  			return new Promise((resolve) => setTimeout(resolve,time));
    //		}
    function xyg() {
        if (g < 5) {
            x = 1, y = 0;
            g = g + 1;
            dt();
            mykeydown();

        }
    }

    function bgcx() {
        x = 1, y = 0;
        Ed = Es();
        document.getElementById('content').innerHTML = "";
        E = Ed;
        dt();
        mykeydown();
    }


    function dt() {   //创建一个入口
        var i, j;   //定义两个变量


        for (i = 0; i < 10; i++) {  //使用for检测每个变量
            for (j = 0; j < 10; j++) {
                var d = document.createElement("div");  //定义每个变量样式
                d.style.cssText = "width:50px;height:50px;background-color:url(6.png);color:url(6.png);position:absolute;text-align:center;";//具体样式
                d.style.left = i * 50 + "px";  //变量大小
                d.style.top = j * 50 + "px";
                d.id = g + "_" + j + "_" + i;//查找id
                // d=E[0];
                //d.innerHTML=E[j][i];
                if (E[g][j][i] == 1) {    //用if检测变量是否等于1 如果为1
                    d.style.background = "url(2.png)"; //变量为墙壁
                }
                if (E[g][j][i] == 3) {
                    d.style.background = "url(4.png)"      //定义为箱子
                }
                if (E[g][j][i] == 4) {
                    d.style.background = "url(5.png)"		//定义为出口
                }
                if (E[g][j][i] == 0) {
                    d.style.background = "url(6.png)"		//定义路
                }

                document.body.appendChild(d);

                document.getElementById("content").appendChild(d);//定义地图在哪


            }

        }//定义人的样式
        r = document.createElement("div");
        r.style.cssText = "width:50px;height:50px;position:absolute";
        r.style.top = 0 * 50 + "px"; //人的初始位置
        r.style.left = 1 * 50 + "px";//地图的0，50像素位置
        r.style.background = "url(7y.png)";
        document.getElementById("content").appendChild(r);//人在地图里


    }

    function mykeydown() {   // 测试键盘数值 左37 上38 右39 下40
        //alert(event.keyCode);
        var k = event.keyCode;

        if (k == 37) {
            fx = 1;
            r.style.background = "url(7z.png)"
            if (E[g][y][x - 1] == 3 && E[g][y][x - 2] == 4) {//判断人物左边第一格是否为箱子且第二格是否为出口，若成立
                var xz = document.getElementById(g + "_" + y + "_" + (x - 1));//找到箱子id
                var ck = document.getElementById(g + "_" + y + "_" + (x - 2));//找到出口id
                E[g][y][x - 1] = 0;//箱子位置数值定义为0
                xz.style.background = "url(6.png)"//即变成路的样式
                if (tg() == 0) {
                    alert("通关了")
                }
            }
            if (E[g][y][x - 1] == 3 && E[g][y][x - 2] == 0) {//判断人物左边第一格是否为箱子且第二格是否为路，若成立
                var xz = document.getElementById(g + "_" + y + "_" + (x - 1));//找到箱子id
                var lu = document.getElementById(g + "_" + y + "_" + (x - 2));//找到路id
                E[g][y][x - 1] = 0;//箱子位置数值定义为0
                E[g][y][x - 2] = 3;//路位置数值定义为3
                xz.style.background = "url(6.png)"//即变成路的样式
                lu.style.background = "url(4.png)"//即变成箱子的样式
            }
            if (E[g][y][x - 1] == 0) {//判断人物左边第一格是否为路，若成立
                r.style.left = parseInt(r.style.left) - 50 + "px";//人物的left减少50px
                x--;//坐标向x减少1
            }

        }
        if (k == 38) {
            fx = 2;
            r.style.background = "url(7s.png)"
            if (E[g][y - 1][x] == 3 && E[g][y - 2][x] == 4) {
                var xz = document.getElementById(g + "_" + (y - 1) + "_" + x);
                var ck = document.getElementById(g + "_" + (y - 2) + "_" + x);
                E[g][y - 1][x] = 0;
                xz.style.background = "url(6.png)"
                if (tg() == 0) {
                    alert("通关了")
                }
            }
            if (E[g][y - 1][x] == 3 && E[g][y - 2][x] == 0) {
                var xz = document.getElementById(g + "_" + (y - 1) + "_" + x);
                var lu = document.getElementById(g + "_" + (y - 2) + "_" + x);
                E[g][y - 1][x] = 0;
                E[g][y - 2][x] = 3;
                xz.style.background = "url(6.png)"
                lu.style.background = "url(4.png)"
            }
            if (E[g][y - 1][x] == 0) {
                r.style.top = parseInt(r.style.top) - 50 + "px";
                y--;
            }

        }
        if (k == 39) {
            fx = 3;
            r.style.background = "url(7y.png)"
            if (E[g][y][x + 1] == 3 && E[g][y][x + 2] == 4) {
                var xz = document.getElementById(g + "_" + y + "_" + (x + 1));
                var ck = document.getElementById(g + "_" + y + "_" + (x + 2));
                E[g][y][x + 1] = 0;
                xz.style.background = "url(6.png)"
                if (tg() == 0) {
                    alert("通关了")
                }
            }
            if (E[g][y][x + 1] == 3 && E[g][y][x + 2] == 0) {
                var xz = document.getElementById(g + "_" + y + "_" + (x + 1));
                var lu = document.getElementById(g + "_" + y + "_" + (x + 2));
                E[g][y][x + 1] = 0;
                E[g][y][x + 2] = 3;
                xz.style.background = "url(6.png)"
                lu.style.background = "url(4.png)"
            }
            if (E[g][y][x + 1] == 0) {
                r.style.left = parseInt(r.style.left) + 50 + "px";
                x++;
            }

        }
        if (k == 40) {
            fx = 4;
            r.style.background = "url(7x.png)"
            if (E[g][y + 1][x] == 3 && E[g][y + 2][x] == 4) {
                //r.style.background="url(7x.png)"
                var xz = document.getElementById(g + "_" + (y + 1) + "_" + x);
                var ck = document.getElementById(g + "_" + (y + 2) + "_" + x);
                E[g][y + 1][x] = 0;
                xz.style.background = "url(6.png)"
                if (tg() == 0) {
                    alert("通关了")
                    xyg();
                }
            }
            if (E[g][y + 1][x] == 3 && E[g][y + 2][x] == 0) {
                //r.style.background="url(7x.png)"
                var xz = document.getElementById(g + "_" + (y + 1) + "_" + x);
                var lu = document.getElementById(g + "_" + (y + 2) + "_" + x);
                E[g][y + 1][x] = 0;
                E[g][y + 2][x] = 3;
                xz.style.background = "url(6.png)"
                lu.style.background = "url(4.png)"
            }
            if (E[g][y + 1][x] == 0) {
                //r.style.background="url(7x.png)"
                r.style.top = parseInt(r.style.top) + 50 + "px";
                y++;
            }

        }
        if (k == 32) {
            var rw = document.getElementById(g + "_" + y + "_" + x);
            //r.style.background="url(7.png)"

            if (fx == 1) {
				if (E[g][y][x - 1] == 0) {
                    var zd = document.getElementById(g + "_" + y + "_" + (x - 1));
                    zd.style.background = "url(10z.png)";
                    E[g][y][x - 1] = 9;
                    zbxg();
                }

				if (E[g][y][x - 1] == 1){
				var q = document.getElementById(g + "_" + y+ "_" + [x-1]);
                //q.style.background = "url(6.png)";
				 E[g][y][x-1] = 0;
				q.style.background="url(9.png)";
				(function(fx){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+y+"_"+[x-1]);
								q.style.background="url(6.png)";
						},100);
						})(fx)
				}
            }
            if (fx == 2) {
                if (E[g][y - 1][x] == 0) {
                    var zd = document.getElementById(g + "_" + (y - 1) + "_" + x);
                    zd.style.background = "url(10s.png)";
                    E[g][y - 1][x] = 9;
                    sbxg();
                }
				if (E[g][y-1][x] == 1){
					var q = document.getElementById(g + "_" + [y-1]+ "_" + x);
                	//q.style.background = "url(6.png)";
					E[g][y-1][x] = 0;
					q.style.background="url(9.png)";
					(function(fx){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+[y-1]+"_"+x);
								q.style.background="url(6.png)";
						},100);
						})(fx)
				}

            }
            if (fx == 3) {
                if (E[g][y][x + 1] == 0) {
                    var zd = document.getElementById(g + "_" + y + "_" + (x + 1));
                    zd.style.background = "url(10y.png)";
                    E[g][y][x + 1] = 9;
                   ybxg();
                }
				if (E[g][y][x + 1] == 1){
				var q = document.getElementById(g + "_" + y+ "_" + [x+1]);
                //q.style.background = "url(6.png)";
				 E[g][y][x+1] = 0;
				q.style.background="url(9.png)";
				(function(fx){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+y+"_"+[x+1]);
								q.style.background="url(6.png)";
						},100);
						})(fx)
				}
            }
            if (fx == 4) {
                if (E[g][y + 1][x] == 0) {
                    var zd = document.getElementById(g + "_" + (y + 1) + "_" + x);
                    zd.style.background = "url(10x.png)";
                    E[g][y + 1][x] = 9;
                   xbxg();
                }
				if (E[g][y+1][x] == 1){
					var q = document.getElementById(g + "_" + [y+1]+ "_" + x);
                	//q.style.background = "url(6.png)";
					E[g][y+1][x] = 0;
					q.style.background="url(9.png)";
					(function(fx){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+[y+1]+"_"+x);
								q.style.background="url(6.png)";
						},100);
						})(fx)
				}

            }
        }
    }

    zbxg = function () {
		var zy;
		 var zx;
        var shu = 0;
        var interval = setInterval(function () { 
			if(shu==0){
				var zd = document.getElementById(g + "_" + y + "_" + [x +shu+ 1]);
				zy=y;
				zx=x;
			}
			//setInterval计时器一直循环；setTimeout计时器只执行一次
            if(E[g][zy][zx +shu- 2] == 3){
				var zd = document.getElementById(g + "_" + zy + "_" + [zx +shu- 1]);
				E[g][zy][zx+shu-1] = 0;
				zd.style.background="url(6.png)";
					clearInterval(interval);
				
				}
			else{
					if (E[g][zy][zx +shu- 2] == 1||(zx+shu)==0) {
				
                var q = document.getElementById(g + "_" + zy + "_" + [zx +shu- 2]);
				var zd = document.getElementById(g + "_" + zy + "_" + [zx +shu- 1]);
                //q.style.background = "url(6.png)";
				 E[g][zy][zx+shu-1] = 0;
                E[g][zy][zx+shu-2] = 0;
				q.style.background="url(9.png)";
                zd.style.background = "url(6.png)";
				(function(shu){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+zy+"_"+(zx+shu-2));
								q.style.background="url(6.png)";
						
						},100);
						})(shu)
						
               
//
//                zd.style.left = x * 50;
                clearInterval(interval);//关掉计时器
            } else {
				
				var zd =document.getElementById(g + "_" + zy + "_" + [zx +shu - 1]);
                //zd.style.background = "url(10z.png)";
//				zd.style.left = parseInt(zd.style.left) - 50+ "px";//   parseInt函数可解析一个字符串，并返回一个整数。
				//document.getElementById(g + "_" + y + "_" + [x +shu - 1]).style.background="url(6.png)";
				var lu =document.getElementById(g + "_" + zy + "_" + [zx +shu -2]);
				E[g][zy][zx+shu-1] = 0;
                E[g][zy][zx+shu] = 0;
				zd.style.background="url(6.png)"
				lu.style.background="url(10z.png)"
				
                shu -= 1;
                
            }
			
			} 
		}, 200);
			
		
	}
	sbxg = function () {
		var zy;
		 var zx;
        var shu = 0;
        var interval = setInterval(function () { 
			if(shu==0){
				var zd = document.getElementById(g + "_" + [y+shu- 1] + "_" + x);
				zy=y;
				zx=x;
			}
			//setInterval计时器一直循环；setTimeout计时器只执行一次
            if(E[g][zy +shu- 2][zx] == 3){
				var zd = document.getElementById(g + "_" + [zy +shu- 1]+ "_" + zx);
				E[g][zy+shu-1][zx] = 0;
				zd.style.background="url(6.png)";
					clearInterval(interval);
				
				}
			else{
					if (E[g][zy+shu- 2][zx] == 1||(zy+shu)==0) {
				
                var q = document.getElementById(g + "_" + [zy +shu- 2]+ "_" + zx);
				var zd = document.getElementById(g + "_" + [zy +shu- 1] + "_" + zx);
                //q.style.background = "url(6.png)";
				 E[g][zy+shu-1][zx] = 0;
                E[g][zy+shu-2][zx] = 0;
				q.style.background="url(9.png)";
                zd.style.background = "url(6.png)";
				(function(shu){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+(zy+shu-2)+"_"+zx);
								q.style.background="url(6.png)";
						
						},100);
						})(shu)
						
               
//
//                zd.style.left = x * 50;
                clearInterval(interval);//关掉计时器
            } else {
				
				var zd =document.getElementById(g + "_" + [zy +shu - 1]+ "_" + zx);
                //zd.style.background = "url(10z.png)";
//				zd.style.left = parseInt(zd.style.left) - 50+ "px";//   parseInt函数可解析一个字符串，并返回一个整数。
				//document.getElementById(g + "_" + y + "_" + [x +shu - 1]).style.background="url(6.png)";
				var lu =document.getElementById(g + "_" + [zy +shu -2]+ "_" + zx);
				E[g][zy+shu-1][zx] = 0;
                E[g][zy+shu][zx] = 0;
				zd.style.background="url(6.png)"
				lu.style.background="url(10s.png)"
				
                shu -= 1;
                
            }
			
			} 
		}, 200);
			
		
	}
	 ybxg = function () {
	
		 var zy;
		 var zx;
			
        var shu = 0;
        var interval = setInterval(function () { 
			//setInterval计时器一直循环；setTimeout计时器只执行一次
			if(shu==0){
				var zd = document.getElementById(g + "_" + y + "_" + [x +shu+ 1]);
				zy=y;
				zx=x;
			}
            if(E[g][zy][zx +shu+ 2] == 3){
				var zd = document.getElementById(g + "_" + zy + "_" + [zx +shu+ 1]);
				E[g][zy][zx+shu+1] = 0;
				zd.style.background="url(6.png)";
					clearInterval(interval);
				
				}
			else{
					if (E[g][zy][zx +shu+ 2] == 1||(zx+shu)==0) {
				
                var q = document.getElementById(g + "_" + zy + "_" + [zx +shu+ 2]);
				var zd = document.getElementById(g + "_" + zy + "_" + [zx +shu+ 1]);
                //q.style.background = "url(6.png)";
				 E[g][zy][zx+shu+1] = 0;
                E[g][zy][zx+shu+2] = 0;
				q.style.background="url(9.png)";
                zd.style.background = "url(6.png)";
				(function(shu){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+zy+"_"+(zx+shu+2));
								q.style.background="url(6.png)";
						
						},100);
						})(shu)
						
               
//
//                zd.style.left = x * 50;
                clearInterval(interval);//关掉计时器
            } else {
				
				var zd =document.getElementById(g + "_" + zy + "_" + [zx +shu +1]);
				
                //zd.style.background = "url(10z.png)";
//				zd.style.left = parseInt(zd.style.left) - 50+ "px";//   parseInt函数可解析一个字符串，并返回一个整数。
				//document.getElementById(g + "_" + y + "_" + [x +shu - 1]).style.background="url(6.png)";
				var lu =document.getElementById(g + "_" + zy + "_" + [zx +shu +2]);
				E[g][zy][zx+shu+1] = 0;
                E[g][zy][zx+shu] = 0;
				zd.style.background="url(6.png)"
				lu.style.background="url(10y.png)"
				
                shu += 1;
                
            }
			
			} 
		}, 200);
			
		
	}
	 xbxg = function () {
		 var zy;
		 var zx;
        var shu = 0;
        var interval = setInterval(function () { 
			//setInterval计时器一直循环；setTimeout计时器只执行一次
			if(shu==0){
				var zd = document.getElementById(g + "_" + [y+shu+ 1] + "_" + x );
				zy=y;
				zx=x;
			}
            if(E[g][zy +shu+ 2][zx] == 3){
				var zd = document.getElementById(g + "_" + [zy +shu+ 1]+ "_" + zx);
				E[g][zy+shu+1][zx] = 0;
				zd.style.background="url(6.png)";
					clearInterval(interval);
				
				}
			else{
					if (E[g][zy+shu+ 2][zx] == 1||(zy+shu)==0) {
				
                var q = document.getElementById(g + "_" + [zy +shu+ 2]+ "_" + zx);
				var zd = document.getElementById(g + "_" + [zy +shu+ 1] + "_" + zx);
                //q.style.background = "url(6.png)";
				 E[g][zy+shu+1][zx] = 0;
                E[g][zy+shu+2][zx] = 0;
				q.style.background="url(9.png)";
                zd.style.background = "url(6.png)";
				(function(shu){
							setTimeout(function (){
								var q =document.getElementById(g+"_"+(zy+shu+2)+"_"+zx);
								q.style.background="url(6.png)";
						
						},100);
						})(shu)
						
               
//
//                zd.style.left = x * 50;
                clearInterval(interval);//关掉计时器
            } else {
				
				var zd =document.getElementById(g + "_" + [zy +shu + 1]+ "_" + zx);
                //zd.style.background = "url(10z.png)";
//				zd.style.left = parseInt(zd.style.left) - 50+ "px";//   parseInt函数可解析一个字符串，并返回一个整数。
				//document.getElementById(g + "_" + y + "_" + [x +shu - 1]).style.background="url(6.png)";
				var lu =document.getElementById(g + "_" + [zy +shu +2]+ "_" + zx);
				E[g][zy+shu+1][zx] = 0;
                E[g][zy+shu][zx] = 0;
				zd.style.background="url(6.png)"
				lu.style.background="url(10x.png)"
				
                shu += 1;
                
            }
			
			} 
		}, 200);
			
		
	}


    tg = function () { //判断是否通关
        var tw = 0; //推完定义为0
        var a, b;  //
        for (a = 0; a < 10; a++) {
            for (b = 0; sb < 10; b++) {
                if (E[g][a][b] == 3) {
                    tw = 1;
                    break;
                }

            }
        }
        return tw;
    }

    document.onkeydown = mykeydown;
    window.onload = init;
    </script>
</head>
<body style="background:url(1.jpg);">
<div style="position: absolute;top:25%;left:30%;z-index: 1;background-Color: url(6.png)\
	;width:1000px;height:650px;" id="content">
</div>

<input type="button" name="" value="重新开始" onclick="javascript:window.location.reload()"/>

<input type="button" name="" value="下一关" onclick="xyg()"/>
<input type="button" name="" value="本关重新开始" onclick="bgcx()"/>
</body>
</html>